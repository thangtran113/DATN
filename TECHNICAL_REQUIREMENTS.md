# YÃŠU Cáº¦U Ká»¸ THUáº¬T CHI TIáº¾T

## ğŸ¯ Má»¤C TIÃŠU Dá»° ÃN

XÃ¢y dá»±ng á»©ng dá»¥ng xem phim trá»±c tuyáº¿n vá»›i phá»¥ Ä‘á» song ngá»¯, tÃ­ch há»£p cÃ¡c tÃ­nh nÄƒng há»c tiáº¿ng Anh, há»— trá»£ Ä‘a ná»n táº£ng (Web, Android, iOS).

---

## ğŸ“‹ YÃŠU Cáº¦U CHá»¨C NÄ‚NG

### 1. Quáº£n lÃ½ ngÆ°á»i dÃ¹ng

#### 1.1 Authentication

- âœ… ÄÄƒng kÃ½ tÃ i khoáº£n má»›i (email/password)
- âœ… ÄÄƒng nháº­p (email/password, Google Sign-In)
- âœ… QuÃªn máº­t kháº©u vÃ  reset password
- âœ… ÄÄƒng xuáº¥t
- âœ… Tá»± Ä‘á»™ng Ä‘Äƒng nháº­p (Remember me)
- âœ… Email verification

#### 1.2 Profile Management

- âœ… Xem vÃ  chá»‰nh sá»­a thÃ´ng tin cÃ¡ nhÃ¢n
- âœ… Äá»•i máº­t kháº©u
- âœ… Upload/change avatar
- âœ… CÃ i Ä‘áº·t preferences (thá»ƒ loáº¡i yÃªu thÃ­ch, trÃ¬nh Ä‘á»™, ngÃ´n ngá»¯ phá»¥ Ä‘á»)
- âœ… Xem thá»‘ng kÃª há»c táº­p
- âœ… XÃ³a tÃ i khoáº£n

---

### 2. Quáº£n lÃ½ phim

#### 2.1 Hiá»ƒn thá»‹ danh sÃ¡ch phim

- âœ… Trang chá»§ vá»›i sections:
  - Featured movies
  - Continue watching
  - Popular movies
  - New releases
  - Movies by genres
- âœ… Browse by categories/genres
- âœ… Search phim (theo tÃªn, diá»…n viÃªn, Ä‘áº¡o diá»…n, nÄƒm)
- âœ… Filter phim (thá»ƒ loáº¡i, nÄƒm phÃ¡t hÃ nh, Ä‘á»™ khÃ³)
- âœ… Sort phim (rating, views, newest)
- âœ… Pagination/infinite scroll

#### 2.2 Chi tiáº¿t phim

- âœ… Hiá»ƒn thá»‹ Ä‘áº§y Ä‘á»§ thÃ´ng tin:
  - Title, description, plot
  - Director, cast
  - Genres, release year, duration
  - Thumbnail, poster
  - Average rating, view count
- âœ… Play button
- âœ… Add to watchlist
- âœ… Rating & reviews section
- âœ… Similar movies section
- âœ… Trailer (náº¿u cÃ³)

---

### 3. Video Player

#### 3.1 Player Controls

- âœ… Play/Pause
- âœ… Seek bar vá»›i preview thumbnails
- âœ… Volume control
- âœ… Playback speed (0.5x, 0.75x, 1x, 1.25x, 1.5x, 2x)
- âœ… Fullscreen mode
- âœ… Picture-in-Picture (PiP)
- âœ… Auto-play next episode/movie
- âœ… Skip intro/outro (optional)

#### 3.2 Subtitle Features

- âœ… Hiá»ƒn thá»‹ phá»¥ Ä‘á» song ngá»¯ (English + Vietnamese)
- âœ… Toggle subtitle visibility
- âœ… Chá»n ngÃ´n ngá»¯ phá»¥ Ä‘á» (EN only, VI only, Both)
- âœ… Adjust subtitle position
- âœ… Adjust subtitle font size
- âœ… Subtitle style customization
- âœ… Click vÃ o cÃ¢u phá»¥ Ä‘á» Ä‘á»ƒ jump Ä‘áº¿n timestamp

#### 3.3 Learning Features trong Player

- âœ… Click vÃ o tá»« trong phá»¥ Ä‘á» Ä‘á»ƒ tra nghÄ©a
- âœ… Loop/repeat Ä‘oáº¡n phá»¥ Ä‘á» Ä‘ang phÃ¡t
- âœ… Mark A-B loop points
- âœ… Slow down playback cho dá»… nghe
- âœ… Hide English/Vietnamese subtitle Ä‘á»ƒ luyá»‡n táº­p
- âœ… Bookmark cÃ¢u phá»¥ Ä‘á» hay

#### 3.4 Progress Tracking

- âœ… Tá»± Ä‘á»™ng lÆ°u tiáº¿n Ä‘á»™ xem
- âœ… Resume tá»« vá»‹ trÃ­ Ä‘Ã£ xem
- âœ… Mark completed khi xem háº¿t

---

### 4. TÃ­nh nÄƒng há»c tiáº¿ng Anh

#### 4.1 Dictionary Integration

- âœ… Tra tá»« Ä‘iá»ƒn trá»±c tiáº¿p tá»« phá»¥ Ä‘á»
- âœ… Hiá»ƒn thá»‹:
  - NghÄ©a tiáº¿ng Viá»‡t
  - PhiÃªn Ã¢m IPA
  - Part of speech
  - Example sentences
  - Synonyms
- âœ… Text-to-Speech cho pronunciation
- âœ… Multiple definitions cho tá»« Ä‘a nghÄ©a
- âœ… Save word to vocabulary list

#### 4.2 Vocabulary Management

- âœ… LÆ°u tá»« vá»±ng kÃ¨m context (cÃ¢u trong phim)
- âœ… Danh sÃ¡ch tá»« Ä‘Ã£ lÆ°u
- âœ… Filter/search trong vocabulary list
- âœ… Sort by date added, alphabetically
- âœ… Mastery levels (New, Learning, Mastered)
- âœ… Spaced repetition reminders
- âœ… Export vocabulary to CSV/Excel

#### 4.3 Practice Features

- âœ… Flashcard mode
- âœ… Quiz tá»« vá»±ng
- âœ… Statistics:
  - Total words learned
  - Words by mastery level
  - Learning streak
  - Progress charts
- âœ… Review due words

#### 4.4 Loop/Repeat Feature

- âœ… Loop má»™t cÃ¢u thoáº¡i nhiá»u láº§n
- âœ… Set number of loops
- âœ… Adjust playback speed
- âœ… Auto-pause between loops
- âœ… Save favorite loops

---

### 5. Social Features

#### 5.1 Comments & Reviews

- âœ… Comment trÃªn phim
- âœ… Rate phim (1-5 stars)
- âœ… Like/dislike comments
- âœ… Reply to comments
- âœ… Edit/delete own comments
- âœ… Report inappropriate comments
- âœ… Sort comments (newest, most liked, top rated)

#### 5.2 User Interactions

- âœ… View user profiles
- âœ… Follow/unfollow users (optional)
- âœ… Share movie links

---

### 6. Watchlist & History

#### 6.1 Watchlist

- âœ… Add/remove movies from watchlist
- âœ… View watchlist
- âœ… Quick add button tá»« movie card
- âœ… Notifications cho phim má»›i trong watchlist

#### 6.2 Watch History

- âœ… Lá»‹ch sá»­ xem phim
- âœ… Continue watching section
- âœ… Progress percentage cho tá»«ng phim
- âœ… Clear history
- âœ… Delete individual items

---

### 7. Recommendation System

#### 7.1 Personalized Recommendations

- âœ… Based on watch history
- âœ… Based on favorite genres
- âœ… Based on ratings
- âœ… Similar movies
- âœ… "Because you watched..." section
- âœ… "Top picks for you"

#### 7.2 Trending & Popular

- âœ… Trending movies (most viewed this week)
- âœ… Most popular all-time
- âœ… Top rated movies
- âœ… New releases

---

### 8. Admin Panel

#### 8.1 Dashboard

- âœ… Statistics overview:
  - Total users, active users
  - Total movies, views
  - Comments, ratings
- âœ… Charts & analytics
- âœ… Recent activities

#### 8.2 Movie Management

- âœ… Upload new movie
- âœ… Edit movie information
- âœ… Delete movie
- âœ… Upload subtitles (SRT format)
- âœ… Set featured movies
- âœ… Publish/unpublish movies
- âœ… Bulk upload (CSV import)

#### 8.3 User Management

- âœ… View user list
- âœ… Search users
- âœ… View user details & activity
- âœ… Ban/unban users
- âœ… Promote to admin

#### 8.4 Content Moderation

- âœ… Review reported comments
- âœ… Delete inappropriate content
- âœ… View moderation logs

---

## ğŸ¨ YÃŠU Cáº¦U PHI CHá»¨C NÄ‚NG

### 1. UI/UX Requirements

#### 1.1 Design Principles

- âœ… Modern, clean interface
- âœ… Intuitive navigation
- âœ… Consistent design language
- âœ… Dark mode support
- âœ… Accessibility (WCAG 2.1 AA)

#### 1.2 Responsive Design

- âœ… Mobile-first approach
- âœ… Tablet optimization
- âœ… Desktop optimization
- âœ… Adaptive layouts
- âœ… Touch-friendly controls

#### 1.3 Color Scheme

- Primary: Netflix-inspired red/dark theme
- Background: Dark (#121212, #1E1E1E)
- Text: White (#FFFFFF), Gray (#B3B3B3)
- Accent: Red (#E50914), Blue (#0071EB)

#### 1.4 Typography

- Font family: Roboto, Inter, or Montserrat
- Heading sizes: 24px, 20px, 18px, 16px
- Body text: 14px, 16px
- Subtitle text: 12px

---

### 2. Performance Requirements

#### 2.1 Speed

- âœ… Page load time < 3 seconds
- âœ… Video buffering < 2 seconds
- âœ… Smooth 60fps animations
- âœ… API response time < 500ms

#### 2.2 Optimization

- âœ… Image lazy loading
- âœ… Video adaptive streaming
- âœ… Code splitting
- âœ… Bundle size optimization
- âœ… Caching strategy

#### 2.3 Scalability

- âœ… Handle 1000+ concurrent users
- âœ… Support 100+ movies library
- âœ… Efficient database queries
- âœ… CDN for video delivery

---

### 3. Security Requirements

#### 3.1 Authentication & Authorization

- âœ… Secure password hashing
- âœ… JWT tokens (Firebase handles this)
- âœ… Role-based access control (User, Admin)
- âœ… Session management
- âœ… CSRF protection

#### 3.2 Data Security

- âœ… Firestore Security Rules
- âœ… Input validation & sanitization
- âœ… XSS protection
- âœ… SQL injection prevention (not applicable for Firestore)
- âœ… Secure file upload

#### 3.3 Privacy

- âœ… GDPR compliance (data export, deletion)
- âœ… Cookie consent
- âœ… Privacy policy
- âœ… Terms of service

---

### 4. Compatibility Requirements

#### 4.1 Browsers (Web)

- âœ… Chrome 90+
- âœ… Firefox 88+
- âœ… Safari 14+
- âœ… Edge 90+

#### 4.2 Mobile Platforms

- âœ… Android 7.0+ (API 24+)
- âœ… iOS 12.0+

#### 4.3 Screen Sizes

- Mobile: 320px - 767px
- Tablet: 768px - 1023px
- Desktop: 1024px+

---

### 5. Reliability Requirements

#### 5.1 Availability

- âœ… 99% uptime
- âœ… Graceful degradation
- âœ… Error handling & fallbacks
- âœ… Offline support (basic features)

#### 5.2 Error Handling

- âœ… User-friendly error messages
- âœ… Retry mechanisms
- âœ… Error logging (Firebase Crashlytics)
- âœ… Network error handling

#### 5.3 Data Integrity

- âœ… Transaction support
- âœ… Data validation
- âœ… Backup strategy
- âœ… Version control

---

### 6. Maintainability Requirements

#### 6.1 Code Quality

- âœ… Clean Architecture pattern
- âœ… SOLID principles
- âœ… Code comments & documentation
- âœ… Consistent naming conventions
- âœ… Linting (flutter_lints)

#### 6.2 Testing

- âœ… Unit tests (60%+ coverage)
- âœ… Widget tests
- âœ… Integration tests
- âœ… E2E tests
- âœ… Manual testing checklist

#### 6.3 Documentation

- âœ… README.md
- âœ… API documentation
- âœ… Code documentation
- âœ… User manual
- âœ… Deployment guide

---

## ğŸ› ï¸ CÃ”NG NGHá»† & THÆ¯ VIá»†N

### Core Framework

```yaml
dependencies:
  flutter: ^3.9.2
  dart: ^3.9.2
```

### State Management

```yaml
provider: ^6.1.1 # Hoáº·c
flutter_bloc: ^8.1.3 # Hoáº·c
riverpod: ^2.4.9 # Chá»n 1 trong 3
```

### Firebase Integration

```yaml
firebase_core: ^2.24.2
firebase_auth: ^4.16.0
cloud_firestore: ^4.14.0
firebase_storage: ^11.6.0
firebase_analytics: ^10.8.0
firebase_crashlytics: ^3.4.9
```

### UI/UX

```yaml
google_fonts: ^6.1.0
flutter_svg: ^2.0.9
cached_network_image: ^3.3.1
shimmer: ^3.0.0
flutter_rating_bar: ^4.0.1
lottie: ^3.0.0 # Animations
animations: ^2.0.11
```

### Video Player

```yaml
video_player: ^2.8.2
chewie: ^1.7.5 # Video player UI
better_player: ^0.0.83 # Alternative
wakelock: ^0.6.2 # Keep screen on
```

### Navigation

```yaml
go_router: ^13.0.1
```

### Networking & APIs

```yaml
http: ^1.2.0
dio: ^5.4.0 # Alternative to http
```

### Local Storage

```yaml
shared_preferences: ^2.2.2
hive: ^2.2.3
hive_flutter: ^1.1.0
```

### Utilities

```yaml
intl: ^0.19.0 # Internationalization & date formatting
timeago: ^3.6.0 # Time formatting
url_launcher: ^6.2.4 # Open URLs
share_plus: ^7.2.1 # Share functionality
image_picker: ^1.0.7 # Pick images
file_picker: ^6.1.1 # Pick files
path_provider: ^2.1.2 # Get paths
permission_handler: ^11.2.0
```

### Text-to-Speech

```yaml
flutter_tts: ^4.0.2
```

### Analytics & Monitoring

```yaml
firebase_analytics: ^10.8.0
firebase_crashlytics: ^3.4.9
```

### Development Tools

```yaml
dev_dependencies:
  flutter_test:
    sdk: flutter
  flutter_lints: ^5.0.0
  build_runner: ^2.4.8
  mockito: ^5.4.4 # Mocking for tests
  integration_test:
    sdk: flutter
```

---

## ğŸ“± PLATFORM-SPECIFIC CONFIGURATION

### Android (android/app/build.gradle)

```gradle
android {
    compileSdkVersion 34
    minSdkVersion 24
    targetSdkVersion 34

    defaultConfig {
        multiDexEnabled true
    }
}
```

### iOS (ios/Runner/Info.plist)

```xml
<key>NSAppTransportSecurity</key>
<dict>
    <key>NSAllowsArbitraryLoads</key>
    <true/>
</dict>
<key>NSCameraUsageDescription</key>
<string>Upload profile picture</string>
<key>NSPhotoLibraryUsageDescription</key>
<string>Select profile picture</string>
```

### Web (web/index.html)

```html
<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>
```

---

## ğŸ”Œ EXTERNAL APIs

### 1. Dictionary API

**Option 1: Free Dictionary API**

- URL: https://dictionaryapi.dev/
- Free, no API key required
- Rate limit: ~450 requests/day per IP

**Option 2: Oxford Dictionary API**

- URL: https://developer.oxforddictionaries.com/
- Requires API key
- Free tier: 3000 requests/month

### 2. TMDB API (Optional - for movie metadata)

- URL: https://www.themoviedb.org/documentation/api
- Free API key
- Rate limit: 40 requests/10 seconds

---

## ğŸ“Š PERFORMANCE METRICS

### Target Metrics

- First Contentful Paint: < 1.8s
- Speed Index: < 3.4s
- Time to Interactive: < 3.8s
- Total Blocking Time: < 200ms
- Lighthouse Score: > 90

---

## ğŸš€ DEPLOYMENT

### Web Deployment

```bash
flutter build web --release
firebase deploy --only hosting
```

### Android Deployment

```bash
flutter build apk --release
flutter build appbundle --release
```

### iOS Deployment

```bash
flutter build ios --release
```

---

## ğŸ“ TESTING REQUIREMENTS

### Test Coverage Goals

- Unit Tests: 70%+
- Widget Tests: 60%+
- Integration Tests: Main user flows

### Testing Checklist

- [ ] User registration & login
- [ ] Video playback & subtitle sync
- [ ] Dictionary lookup & vocabulary save
- [ ] Comment & rating
- [ ] Watchlist & history
- [ ] Admin CRUD operations
- [ ] Responsive layouts
- [ ] Performance under load

---

## ğŸ” FIREBASE CONFIGURATION

### Firebase Projects

- Development: movie-learning-dev
- Production: movie-learning-prod

### Firebase Services

- âœ… Authentication (Email, Google)
- âœ… Firestore Database
- âœ… Storage (videos, images)
- âœ… Hosting (web app)
- âœ… Analytics
- âœ… Crashlytics
- âœ… Cloud Functions (optional)

---

**TÃ i liá»‡u nÃ y lÃ  reference chÃ­nh cho development. Update khi cÃ³ thay Ä‘á»•i yÃªu cáº§u.**
