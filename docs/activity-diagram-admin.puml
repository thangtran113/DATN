@startuml Activity Diagram - Admin quản lý phim
!theme plain
skinparam backgroundColor #FEFEFE
skinparam activity {
    BackgroundColor #FFE0E0
    BorderColor #E53935
    FontSize 12
}
skinparam activityDiamond {
    BackgroundColor #FFF9C4
    BorderColor #FBC02D
}

title Activity Diagram - Admin quản lý phim

start
|Admin|
:Đăng nhập với quyền Admin;
:Vào trang Admin Panel;

|System|
:Kiểm tra quyền Admin;

if (Có quyền Admin?) then (Không)
  :Hiển thị "Access Denied";
  stop
else (Có)
  |System|
  :Hiển thị Dashboard;
  :Hiển thị menu quản lý;
  
  |Admin|
  if (Chọn chức năng?) then (Thêm phim)
    :Nhấn "Thêm phim";
    :Nhập thông tin:\n- Tiêu đề, mô tả\n- Thể loại, năm, Level;
    :Upload poster, video, subtitle;
    
    |System|
    :Validate dữ liệu;
    
    if (Hợp lệ?) then (Không)
      :Hiển thị lỗi;
      stop
    else (Có)
      |System|
      :Upload files lên Storage;
      :Lưu vào Firestore;
      :Hiển thị "Thêm thành công";
      stop
    endif
    
  else if (Sửa phim) then
    |Admin|
    :Chọn phim cần sửa;
    :Chỉnh sửa thông tin;
    
    |System|
    :Validate và update Firestore;
    :Hiển thị "Cập nhật thành công";
    stop
    
  else if (Xóa phim) then
    |Admin|
    :Chọn phim và xác nhận xóa;
    
    |System|
    :Xóa files từ Storage;
    :Xóa document từ Firestore;
    :Hiển thị "Xóa thành công";
    stop
    
  else (Xem thống kê)
    |System|
    :Hiển thị dashboard:\n- Số phim, user\n- Lượt xem, comments;
    stop
  endif
endif

@enduml
